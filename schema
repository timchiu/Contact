alter table contact_group drop constraint FK3890E5A0DE7E8C92;
alter table contact_group drop constraint FK3890E5A0DB3092C4;
alter table role_permissions drop constraint FKEAD9D23B6538AF35;
alter table tao_center_tao_member drop constraint FKD05F04A4557AB1F9;
alter table tao_center_tao_member drop constraint FKD05F04A41E3D2904;
alter table tao_center_tao_region drop constraint FKD8E4A0FE97D1A664;
alter table tao_center_tao_region drop constraint FKD8E4A0FEDB3092C4;
alter table tao_member_contact_record drop constraint FK94F438B8A8204C20;
alter table tao_member_languages drop constraint FK5E20FFB31E3D2904;
alter table tao_region drop constraint FK538FEA319D813255;
alter table tao_region drop constraint FK538FEA31764C7A95;
alter table user drop constraint FK36EBCB39EF7967;
alter table user drop constraint FK36EBCB38F30290;
alter table user drop constraint FK36EBCB46ED5738;
alter table user drop constraint FK36EBCB5D879659;
alter table user drop constraint FK36EBCBB61A8E28;
alter table user drop constraint FK36EBCBC7821DCF;
alter table user drop constraint FK36EBCB94B9CC94;
alter table user_permissions drop constraint FKE693E610A637315;
alter table user_roles drop constraint FK734299496538AF35;
alter table user_roles drop constraint FK73429949A637315;
drop table contact_group if exists;
drop table contact_record if exists;
drop table event_log_item if exists;
drop table role if exists;
drop table role_permissions if exists;
drop table tao_center if exists;
drop table tao_center_tao_member if exists;
drop table tao_center_tao_region if exists;
drop table tao_member_contact_record if exists;
drop table tao_member_languages if exists;
drop table tao_region if exists;
drop table temple if exists;
drop table user if exists;
drop table user_permissions if exists;
drop table user_roles if exists;
create table contact_group (id bigint generated by default as identity (start with 1), version bigint not null, leader_id bigint, name varchar(255) not null, tao_region_id bigint not null, primary key (id));
create table contact_record (id bigint generated by default as identity (start with 1), version bigint not null, created_by varchar(255) not null, date_created timestamp not null, description varchar(1500) not null, last_updated timestamp not null, primary key (id));
create table event_log_item (id bigint generated by default as identity (start with 1), version bigint not null, action_details varchar(4096), action_type varchar(255) not null, actor varchar(255) not null, class_name varchar(255), comments varchar(255), date_created timestamp not null, external bit not null, level integer not null, persisted_object_id varchar(255), persisted_object_version bigint, primary key (id));
create table role (id bigint generated by default as identity (start with 1), version bigint not null, name varchar(255) not null, primary key (id), unique (name));
create table role_permissions (role_id bigint, permissions_string varchar(255));
create table tao_center (id bigint generated by default as identity (start with 1), version bigint not null, name varchar(255) not null, primary key (id));
create table tao_center_tao_member (tao_center_leaders_id bigint, tao_member_id bigint);
create table tao_center_tao_region (tao_center_regions_id bigint, tao_region_id bigint);
create table tao_member_contact_record (tao_member_contact_records_id bigint, contact_record_id bigint, contact_records_idx integer);
create table tao_member_languages (tao_member_id bigint, languages_string varchar(255));
create table tao_region (id bigint generated by default as identity (start with 1), version bigint not null, backup_leader_id bigint, name varchar(255) not null, primary_leader_id bigint, primary key (id));
create table temple (id bigint generated by default as identity (start with 1), version bigint not null, name varchar(255) not null, primary key (id));
create table user (id bigint generated by default as identity (start with 1), version bigint not null, date_created timestamp not null, last_updated timestamp not null, password_hash varchar(255) not null, username varchar(20), class varchar(255) not null, address_city varchar(255), address_country varchar(255), address_region varchar(255), address_state_or_province varchar(255), address_street1 varchar(255), address_street2 varchar(255), address_zip_code varchar(255), birth_date timestamp, cellphone varchar(255), chinese_name varchar(255), completed_tao_seminar bit, contact_group_id bigint, contact_person_id bigint, current_temple_id bigint, education_level varchar(255), email varchar(255), english_name varchar(255), excel_id integer, gender varchar(255), guarantor_id bigint, introducer_id bigint, merit_fee varchar(255), notes varchar(512), occupation varchar(255), phone_number varchar(255), tao_group varchar(255), tao_receiving_date timestamp, tao_receiving_lunar_date varchar(255), tao_receiving_temple_id bigint, tao_receiving_time varchar(255), transmitting_master_id bigint, vegetarian_date timestamp, primary key (id), unique (username));
create table user_permissions (user_id bigint, permissions_string varchar(255));
create table user_roles (user_id bigint not null, role_id bigint not null, primary key (user_id, role_id));
alter table contact_group add constraint FK3890E5A0DE7E8C92 foreign key (leader_id) references user;
alter table contact_group add constraint FK3890E5A0DB3092C4 foreign key (tao_region_id) references tao_region;
alter table role_permissions add constraint FKEAD9D23B6538AF35 foreign key (role_id) references role;
alter table tao_center_tao_member add constraint FKD05F04A4557AB1F9 foreign key (tao_center_leaders_id) references tao_center;
alter table tao_center_tao_member add constraint FKD05F04A41E3D2904 foreign key (tao_member_id) references user;
alter table tao_center_tao_region add constraint FKD8E4A0FE97D1A664 foreign key (tao_center_regions_id) references tao_center;
alter table tao_center_tao_region add constraint FKD8E4A0FEDB3092C4 foreign key (tao_region_id) references tao_region;
alter table tao_member_contact_record add constraint FK94F438B8A8204C20 foreign key (contact_record_id) references contact_record;
alter table tao_member_languages add constraint FK5E20FFB31E3D2904 foreign key (tao_member_id) references user;
alter table tao_region add constraint FK538FEA319D813255 foreign key (backup_leader_id) references user;
alter table tao_region add constraint FK538FEA31764C7A95 foreign key (primary_leader_id) references user;
alter table user add constraint FK36EBCB39EF7967 foreign key (contact_person_id) references user;
alter table user add constraint FK36EBCB38F30290 foreign key (guarantor_id) references user;
alter table user add constraint FK36EBCB46ED5738 foreign key (transmitting_master_id) references user;
alter table user add constraint FK36EBCB5D879659 foreign key (tao_receiving_temple_id) references temple;
alter table user add constraint FK36EBCBB61A8E28 foreign key (introducer_id) references user;
alter table user add constraint FK36EBCBC7821DCF foreign key (current_temple_id) references temple;
alter table user add constraint FK36EBCB94B9CC94 foreign key (contact_group_id) references contact_group;
alter table user_permissions add constraint FKE693E610A637315 foreign key (user_id) references user;
alter table user_roles add constraint FK734299496538AF35 foreign key (role_id) references role;
alter table user_roles add constraint FK73429949A637315 foreign key (user_id) references user;
